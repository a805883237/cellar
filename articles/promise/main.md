# promise

## JS 中的 Promise 是什么？

是符合Promise协议的对象。支持情况：浏览器方面最新版的 Chrome、Firefox、safari都已经原生支持；Node也原生支持；只有IE不支持。

## 要解决什么问题？ 

Callback hell，回调金字塔，回调黑洞，随便怎么叫吧，就是异步编程产生的回调层层嵌套。用前端常见的jQuery Ajax举例代码如下：

    // 顶层回调
    ajax({
        url: 'url1',
        success: function (data1) {
        
            // 第二层回调
            ajax({
                url: 'url2',
                success: function (data2) {
                
                    // 第三层回调
                    ajax({
                        url: 'url3',
                        success: function (data3) {
                            // 三层数据全部加载完毕，在这里我们可以用data1 到 data3 了
                        }
                    });
                }
            });
        }
    });

## 什么时候适合用Promise？

**最适合的场景**是异步操作必须保证调用的先后顺序，而且是一项完成后才能执行下一项这种场景，最好是个个异步操作间没有数据交互的那种。举个简单的例子：登录是一个异步，获取当前登录用基本信息（用户名，头像等）户是一个异步，不用传参的方式可以降低耦合，而且这样定义接口更单例一些。

接下来我们通过一些其他的辅助方法逐渐放宽条件（从中科院学的方法论）。

promise需要保证顺序？ Yes

但是返回的结果可以相互调用吗？

有一个失败触发的事件吗？

有最终的事件吗？

有序异步队列解决方案。