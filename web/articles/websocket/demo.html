<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title> 开启WebSocket </title>
    <script src="jquery-2.1.3.js"></script>
</head>
<body>
WebSocket
<script>
    $.ajax({
        url: '/websocket-demo',
        success: function (data) {
            var socket;
            document.write(' ---- WebSocket接口初始化完成 ---- <br/>');

            var host = 'ws://' + location.host;
            // 和服务器建立socket连接，信道建立
            socket = new WebSocket(host);
            socket.onopen = function () {
                socket.send('确认已开启WebSocket链接');
                document.write(' ---- WebSocket已开启 ---- <br/>');
            };

            socket.onmessage = function (message) {
                var msg = '来自服务器的WebSocket信息：' + message.data;
                document.write(msg + '，<br/>');
            };

            socket.onerror = function (error) {
                console.log('WebSocket 链接错误: ' + error);
            };
        },
        error: function (data) {
            console.log(data);
        }
    });

</script>
</body>
</html>